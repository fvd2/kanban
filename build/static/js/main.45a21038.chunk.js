(this.webpackJsonpkanban=this.webpackJsonpkanban||[]).push([[0],{174:function(e,t,n){"use strict";n.r(t),n.d(t,"db",(function(){return ve}));var a=n(0),s=n.n(a),c=n(60),i=n.n(c),o=n(213),r=n(221),l=n(1),d=n.n(l),u=n(7),j=n(8),b=n(199),m=n(196),O=n(194),p=n(203),x=n(113),h=n(210),f=n(123),k=n(36),v=n(16),g=n(53),y=n(89),I=n(191),C=n(192),L=n(149),T=n(31),w=n(2),S=function(e){var t=e.isOpen,n=e.onClose,a=e.dispatch,s=e.activeList;return Object(w.jsxs)(g.a,{isOpen:t,onClose:n,children:[Object(w.jsx)(g.h,{}),Object(w.jsxs)(g.d,{children:[Object(w.jsx)(g.g,{children:"Add a column"}),Object(w.jsx)(T.c,{initialValues:{columnName:""},validate:function(e){var t={};return e.columnName||(t.columnName="Required"),t},onSubmit:function(e,t){var c=t.setSubmitting;setTimeout((function(){a({type:"addColumn",payload:{activeList:s,columnName:e.columnName}}),c(!1),n()}),100)},children:function(e){var t=e.errors,a=e.touched,s=e.isSubmitting;return Object(w.jsxs)(T.b,{children:[Object(w.jsx)(g.b,{children:Object(w.jsx)(T.a,{name:"columnName",children:function(e){var n=e.field;return Object(w.jsxs)(y.a,{isInvalid:t.columnName&&a.columnName,children:[Object(w.jsx)(I.a,Object(v.a)(Object(v.a)({},n),{},{name:"columnName",placeholder:"Column name"})),Object(w.jsx)(C.a,{children:t.columnName})]})}})}),Object(w.jsxs)(g.f,{children:[Object(w.jsx)(L.a,{colorScheme:"blue",type:"submit",mr:3,isDisabled:t.columnName,isLoading:s,children:"Add"}),Object(w.jsx)(L.a,{variant:"ghost",onClick:n,children:"Cancel"})]})]})}})]})]})},F=n(200),D=n(207),R=n(197),N=function(e){var t=e.onAddTask,n=e.hideTaskInput,s=e.isOpen,c=e.columnId,i=Object(a.useState)(""),o=Object(j.a)(i,2),r=o[0],l=o[1],d=Object(a.useRef)();Object(a.useEffect)((function(){s&&d.current.focus()}),[s]);return Object(w.jsx)("form",{onSubmit:function(e){e.preventDefault(),r.trim().length>0?(t(r,c),l(""),n()):n()},onBlur:function(){n()},children:Object(w.jsx)(O.a,{children:Object(w.jsx)(I.a,{ref:d,value:r,placeholder:"Your next task",onChange:function(e){l(e.target.value)}})})})},E=n(217),A=n(222),z=n(219),$=n(216),M=n(224),B=n(195),H={tasks:{1:"#F56565",2:"#ED8936",3:"#48BB78",4:"#38B2AC",5:"#4299e1",6:"#EAEAEA"}},P=Object(B.a)({config:{initialColorMode:"light",useSystemColorMode:!0}}),q=n(204),V=n(205),G=n(206),X=n(223),J=n(198),K=function(e){var t=e.btnRef,n=e.isOpen,s=e.onClose,c=e.heading,i=e.id,o=e.title,r=e.color,l=e.owner,d=e.index,u=e.taskHandler,b=e.columnId,p=e.columns,x=e.columnTitlesToIds,h=Object(a.useState)(r),f=Object(j.a)(h,2),k=f[0],S=f[1],F=Object(a.useState)(x.get(b)),D=Object(j.a)(F,2),N=D[0],E=D[1];Object(a.useEffect)((function(){return function(){s()}}),[s]);var A=Object(a.useRef)(x.get(b)),z=function(){E(A.current.value)},$=[1,2,3,4,5,6].map((function(e){return k===H.tasks[e].trim()?Object(w.jsx)(m.b,{align:"center",size:"24px",border:"2px solid black",m:.5,bg:H.tasks[e]},e):Object(w.jsx)(m.b,{align:"center",cursor:"pointer",size:"24px",border:"2px solid white",m:.5,bg:H.tasks[e],onClick:function(){return S(H.tasks[e])}},e)}));return Object(w.jsxs)(X.a,{isOpen:n,onClose:s,placement:"right",finalFocusRef:t,children:[Object(w.jsx)(g.h,{}),Object(w.jsxs)(X.b,{children:[Object(w.jsx)(g.c,{}),Object(w.jsx)(g.g,{children:c}),Object(w.jsx)(T.c,{initialValues:{title:o,owner:l},validate:function(e){var t={};return e.title||(t.title="Required"),t},onSubmit:function(e,t){var n=t.setSubmitting;u({taskId:i,title:e.title,owner:e.owner,color:k,sourceColumn:b,columnId:x.get(N),destinationColumn:x.get(N),index:d}),n(!1),s()},children:function(e){var t=e.errors,n=e.touched,a=e.isSubmitting;return Object(w.jsxs)(T.b,{children:[Object(w.jsxs)(g.b,{children:[Object(w.jsx)(T.a,{name:"title",children:function(e){var a=e.field;return Object(w.jsxs)(y.a,{mb:3,isInvalid:t.title&&n.title,children:[Object(w.jsx)(R.a,{children:"Title:"}),Object(w.jsx)(I.a,Object(v.a)(Object(v.a)({},a),{},{name:"title",placeholder:"Task title"})),Object(w.jsx)(C.a,{children:t.title})]})}}),Object(w.jsx)(T.a,{name:"owner",children:function(e){var a=e.field;return Object(w.jsxs)(y.a,{mb:3,isInvalid:t.owner&&n.owner,children:[Object(w.jsx)(R.a,{children:"Owner:"}),Object(w.jsx)(I.a,Object(v.a)(Object(v.a)({},a),{},{name:"owner",placeholder:"Task owner"})),Object(w.jsx)(C.a,{children:t.owner})]})}}),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(R.a,{children:"Category:"}),Object(w.jsxs)(J.a,{ref:A,onChange:z,mb:3,children:[Object(w.jsx)("option",{value:x.get(b),children:x.get(b)},b),p.map((function(e){return e===x.get(b)?"":Object(w.jsx)("option",{value:e,children:e},e)}))]}),Object(w.jsx)(R.a,{children:"Color:"}),Object(w.jsx)(O.a,{children:$})]})]}),Object(w.jsxs)(g.f,{children:[Object(w.jsx)(L.a,{variant:"ghost",onClick:s,children:"Cancel"}),Object(w.jsx)(L.a,{colorScheme:"blue",type:"submit",mr:3,isDisabled:t.title||t.owner,isLoading:a,children:"Submit"})]})]})}})]})]})},Y=function(e){var t=e.id,n=e.index,s=e.title,c=e.color,i=e.owner,o=e.onColorChange,r=e.onDeleteTask,l=e.columnId,d=e.onSubmitEditedTask,u=e.columns,x=e.columnTitlesToIds,h=Object(a.useState)(!1),f=Object(j.a)(h,2),g=f[0],y=f[1],I=Object(b.a)(),C=I.isOpen,L=I.onOpen,T=I.onClose,S=Object(a.useRef)(),D=function(e){"mouseenter"!==e.type&&"mouseover"!==e.type||y(!0),"mouseleave"===e.type&&y(!1)},N=function(){L()},B=function(e){d(e)},P=function(){r(l,t,n)},X=[1,2,3,4,5,6],J=function(e){return X.map((function(n){return Object(w.jsx)(m.b,{align:"center",size:"16px",m:.5,bg:H.tasks[n],onClick:function(){return function(e,n){o(t,H.tasks[e]),n()}(n,e)}},n)}))};return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(k.b,{draggableId:t,index:n,children:function(e){return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(F.a,Object(v.a)(Object(v.a)(Object(v.a)({justify:"center",onMouseEnter:D,onMouseOver:D,onFocus:D,onMouseLeave:D,bg:"white",mb:1,pl:2,pt:1,pb:1,pr:.5,border:"1px solid #CACFD6",borderRadius:2,boxShadow:"2x1",height:"auto"},e.draggableProps),{},{ref:e.innerRef},e.dragHandleProps),{},{children:[Object(w.jsxs)(O.a,{align:"center",children:[Object(w.jsx)(E.a,{children:function(e){var t=e.onClose;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(E.c,{children:Object(w.jsx)(m.b,{align:"center",size:"16px",bg:c,mr:1})}),Object(w.jsx)(A.a,{children:Object(w.jsx)(E.b,{width:"auto",p:1,children:Object(w.jsx)(O.a,{children:J(t)})})})]})}}),Object(w.jsxs)(O.a,{justify:"space-between",align:"center",width:"90%",children:[Object(w.jsx)(z.a,{label:s,children:Object(w.jsx)(R.a,{fontSize:"sm",textAlign:"center",as:"b",isTruncated:!0,children:s})}),Object(w.jsx)(K,{btnRef:S,isOpen:C,onClose:T,heading:"Edit task",id:t,title:s,color:c,owner:i,taskHandler:B,columns:u,columnTitlesToIds:x,columnId:l,index:n}),g?Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)($.a,{children:[Object(w.jsx)($.b,{as:p.a,"aria-label":"display task settings",variant:"unstyled",size:"xs",icon:Object(w.jsx)(q.a,{})}),Object(w.jsxs)($.d,{children:[Object(w.jsx)($.c,{icon:Object(w.jsx)(V.a,{}),command:"E",onClick:N,ref:S,children:"Edit"}),Object(w.jsx)($.c,{icon:Object(w.jsx)(G.a,{}),command:"D",onClick:P,children:"Delete"})]})]})}):Object(w.jsx)(p.a,{variant:"unstyled",size:"xs"})]})]}),i&&Object(w.jsxs)(O.a,{align:"center",children:[Object(w.jsx)(M.a,{size:"2xs",mr:1}),Object(w.jsx)(R.a,{fontSize:"sm",children:i})]})]}))})}})})},_=function(e){var t=e.tasks,n=e.onColorChange,a=e.onDeleteTask,s=e.onSubmitEditedTask,c=e.columnId,i=e.columns,o=e.columnTitlesToIds;return Object(w.jsx)(O.a,{direction:"column",children:t.map((function(e,t){return Object(w.jsx)(Y,{id:e.id,title:e.title,owner:e.owner,color:e.color,index:t,onColorChange:n,columnTitlesToIds:o,onDeleteTask:a,columnId:c,onSubmitEditedTask:s,columns:i},e.id)}))})},Q=function(e){var t=e.width,n=e.id,s=e.title,c=e.tasks,i=e.index,o=e.onColumnSubmit,r=e.onColorChange,l=e.onDeleteColumn,d=e.onAddTask,u=e.activeList,b=e.onDeleteTask,x=e.onSubmitEditedTask,h=e.columns,f=e.columnTitlesToIds,g=Object(a.useState)(!1),C=Object(j.a)(g,2),L=C[0],S=C[1],E=Object(a.useState)(!1),A=Object(j.a)(E,2),z=A[0],$=A[1],M=Object(a.useState)(!1),B=Object(j.a)(M,2),H=B[0],P=B[1],q=Object(a.useRef)();Object(a.useEffect)((function(){z&&q.current.focus()}),[z]);var X=function(e){"mouseover"!==e.type&&"mouseenter"!==e.type||S(!0),"mouseleave"===e.type&&S(!1)},J=function(){$((function(e){return!e}))},K=function(){l({type:"deleteColumn",payload:{columnId:n,index:i}})},Y=function(){P((function(e){return!e}))},Q=Object(w.jsx)(T.c,{initialValues:{columnName:s},validate:function(e){var t={};return e.columnName||(t.columnName="Required"),t},onSubmit:function(e){o(n,e.columnName),J()},children:function(e){var t=e.handleSubmit,n=e.errors;return Object(w.jsx)(T.b,{children:Object(w.jsx)(T.a,{name:"columnName",children:function(e){var a=e.field;return Object(w.jsx)(y.a,{isInvalid:n.columnName,children:Object(w.jsx)(I.a,Object(v.a)(Object(v.a)({},a),{},{ref:q,name:"columnName",placeholder:"Column name",onBlur:t}))})}})})}});return Object(w.jsx)(m.a,{children:Object(w.jsx)(k.b,{draggableId:n,index:i,children:function(e){return Object(w.jsxs)(F.a,Object(v.a)(Object(v.a)(Object(v.a)({width:t,ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{mt:2,p:3,children:[Object(w.jsx)(m.a,{align:"center",bg:"#FFFFFF",mb:3,p:0,border:"1px solid #CACFD6",borderRadius:2,children:z?Q:Object(w.jsxs)(O.a,{onMouseEnter:X,onMouseOver:X,onMouseLeave:X,align:"center",justify:"space-between",children:[Object(w.jsx)(D.a,{ml:3,mt:1,mb:1,align:"center",lineHeight:"unset",size:"sm",isTruncated:!0,children:s}),L?Object(w.jsxs)(O.a,{children:[Object(w.jsx)(p.a,{onClick:J,size:"sm",variant:"unstyled",icon:Object(w.jsx)(V.a,{})}),Object(w.jsx)(p.a,{onClick:K,size:"sm",variant:"unstyled",icon:Object(w.jsx)(G.a,{})})]}):Object(w.jsx)(O.a,{children:Object(w.jsx)(p.a,{size:"sm",variant:"unstyled"})})]})}),Object(w.jsx)(m.a,{mb:3,borderBottom:"2px solid #CACFD6"}),Object(w.jsx)(k.c,{droppableId:n,type:"task",index:i,children:function(e){return Object(w.jsxs)("div",{ref:e.innerRef,children:[Object(w.jsx)(_,Object(v.a)(Object(v.a)({},e.droppableProps),{},{tasks:c,onColorChange:r,activeList:u,columnId:n,onDeleteTask:b,onSubmitEditedTask:x,columns:h,columnTitlesToIds:f})),e.placeholder]})}}),e.placeholder,H?Object(w.jsx)(N,{onAddTask:d,hideTaskInput:Y,isOpen:H,columnId:n}):Object(w.jsx)(R.a,{justify:"center",color:"#666666","aria-label":"Add task button",onClick:Y,children:"+ Add Task"})]}))}})})},U=n(208),W=function(e){var t=e.data,n=e.onOpen,a=e.onDrop,s=e.onColumnSubmit,c=e.onColorChange,i=e.onAddTask,o=e.onDeleteColumn,r=e.onDeleteTask,l=e.onSubmitEditedTask,d=e.columnTitlesToIds;return Object(w.jsx)(k.c,{droppableId:"board",type:"column",direction:"horizontal",children:function(e){return Object(w.jsx)(w.Fragment,{children:t&&Object(w.jsxs)(m.a,Object(v.a)(Object(v.a)({display:"flex",ref:e.innerRef},e.droppableProps),{},{children:[t.columnOrder.map((function(e,n){return Object(w.jsx)(Q,{width:"250px",id:e,index:n,title:t.columns[e].title,taskIds:t.columns[e].taskIds,tasks:t.columns[e].taskIds.map((function(e){return t.tasks[e]})),onDrop:a,onColumnSubmit:s,onColorChange:c,onAddTask:i,onDeleteColumn:o,onDeleteTask:r,onSubmitEditedTask:l,columns:Object.values(t.columns).map((function(e){return e.title})),columnTitlesToIds:d},e)})),e.placeholder,Object(w.jsx)(p.a,Object(v.a)(Object(v.a)({mt:6},t.columnOrder.length<1?{marginLeft:5}:""),{},{size:"xs",bgColor:"#424874",color:"#FFFFFF",_hover:{bgColor:"#292D48"},isRound:!0,"aria-label":"Add column button",icon:Object(w.jsx)(U.a,{}),onClick:n}))]}))})}})},Z=n(209),ee=function(e){var t=e.columnTitle,n=e.columnId,s=e.taskId,c=e.taskTitle,i=e.taskOwner,o=e.taskColor,r=e.index,l=e.taskHandler,d=e.portalRef,u=e.onDeleteTask,O=e.columnTitlesToIds,x=e.columns,h=Object(b.a)(),f=h.isOpen,k=h.onOpen,v=h.onClose,g=Object(a.useState)(!1),y=Object(j.a)(g,2),I=y[0],C=y[1],L=Object(a.useRef)();return Object(w.jsxs)(w.Fragment,{children:[I&&Object(w.jsx)(A.a,{containerRef:d,children:Object(w.jsx)(K,{btnRef:L,isOpen:f,onClose:v,heading:"Edit task",id:s,title:c,color:o,owner:i,taskHandler:l,columns:x,columnTitlesToIds:O,columnId:n,index:r})}),Object(w.jsxs)(Z.f,{children:[Object(w.jsx)(Z.c,{children:t}),Object(w.jsx)(Z.c,{children:c}),Object(w.jsx)(Z.c,{children:i}),Object(w.jsx)(Z.c,{children:Object(w.jsx)(m.b,{size:"20px",align:"center",justify:"center",border:"1px solid black",m:.5,bg:o})}),Object(w.jsxs)(Z.c,{children:[Object(w.jsx)(p.a,{size:"xs",variant:"unstyled",icon:Object(w.jsx)(V.a,{}),onClick:function(){C(!0),k()}}),Object(w.jsx)(p.a,{size:"xs",variant:"unstyled",icon:Object(w.jsx)(G.a,{}),onClick:function(){u(n,s,r)}})]})]},s)]})},te=function(e){var t=e.data,n=e.onAddNewDetailedTask,s=e.columnTitlesToIds,c=e.onSubmitEditedTask,i=e.onDeleteTask,o=Object(b.a)(),r=o.isOpen,l=o.onOpen,d=o.onClose,u=Object(a.useRef)(),j=Object(a.useRef)(),p=function(e){c(e)};return Object(w.jsx)(O.a,{ref:j,direction:"column",children:Object(w.jsxs)(m.a,{align:"center",bg:"#FFFFFF",mt:5,ml:5,p:0,border:"1px solid #CACFD6",borderRadius:2,children:[Object(w.jsxs)(Z.a,{variant:"simple",size:"sm",children:[Object(w.jsx)(Z.e,{bgColor:"#5B8266",children:Object(w.jsxs)(Z.f,{children:[Object(w.jsx)(Z.d,{color:"#FFFFFF",children:"Category"}),Object(w.jsx)(Z.d,{color:"#FFFFFF",children:"Task"}),Object(w.jsx)(Z.d,{color:"#FFFFFF",children:"Owner"}),Object(w.jsx)(Z.d,{color:"#FFFFFF",children:"Color"}),Object(w.jsx)(Z.d,{color:"#FFFFFF",children:"Options"})]})}),Object(w.jsx)(Z.b,{children:t&&Object.values(t.columns).map((function(e){return e.taskIds.map((function(n,a){return Object(w.jsx)(ee,{columnTitle:e.title,columnId:e.id,taskId:t.tasks[n].id,taskTitle:t.tasks[n].title,taskOwner:t.tasks[n].owner,taskColor:t.tasks[n].color,index:a,portalRef:j,taskHandler:p,onDeleteTask:i,columns:Object.values(t.columns).map((function(e){return e.title})),columnTitlesToIds:s},t.tasks[n].id)}))}))})]}),r&&Object(w.jsx)(K,{btnRef:u,isOpen:r,onClose:d,heading:"Create new task",id:"",title:"",color:"#EAEAEA",owner:"",taskHandler:function(e){n(e)},columns:Object.values(t.columns).map((function(e){return e.title})),columnId:Object.values(t.columns)[0].id,columnTitlesToIds:s}),Object(w.jsx)(R.a,{fontSize:"sm",ml:3,align:"left",color:"#666666",onClick:function(){l()},children:"+ Add Task"})]})})},ne=function(e){var t=e.taskListData,n=e.activeList,s=e.dispatch,c=e.toggleMenu,i=e.isSmallerThan768,o=Object(a.useState)(t),r=Object(j.a)(o,2),l=r[0],d=r[1],u=Object(b.a)(),v=u.isOpen,g=u.onOpen,y=u.onClose,I=Object(a.useState)("board"),C=Object(j.a)(I,2),L=C[0],T=C[1],F=Object(a.useState)(E(t,t.activeList)),D=Object(j.a)(F,2),R=D[0],N=D[1];function E(e,t){return e.taskLists[t].columns?new Map(Object.values(e.taskLists[t].columns).map((function(e){return[e.title,e.id]})).concat(Object.values(e.taskLists[t].columns).map((function(e){return[e.id,e.title]})))):new Map}Object(a.useEffect)((function(){d(t),N(E(t,t.activeList))}),[t]);var A=function(e){if("column"===e.type&&s({type:"moveColumn",payload:{sourceIndex:e.source.index,destinationIndex:e.destination.index,draggableId:e.draggableId}}),"task"===e.type){if(!e.destination)return;s({type:"moveTask",payload:{sourceColumn:e.source.droppableId,sourceIndex:e.source.index,destinationColumn:e.destination.droppableId,destinationIndex:e.destination.index,draggableId:e.draggableId}})}},z=function(e,t,n){s({type:"deleteTask",payload:{columnId:e,taskId:t,index:n}})},$=function(){T((function(e){return"board"===e?"table":"board"}))},M=function(e){var t=e.taskId,n=e.title,a=e.color,c=e.owner,i=e.columnId,o=e.sourceColumn,r=e.destinationColumn,l=e.index;s({type:"editTask",payload:{columnId:i,taskId:t,title:n,color:a,owner:c,sourceColumn:o,destinationColumn:r,index:l}})};return Object(w.jsx)(m.a,{bg:"#F4F4F4",minWidth:"fit-content",width:"100%",children:Object(w.jsxs)(k.a,{onDragEnd:A,children:[Object(w.jsx)(S,{isOpen:v,onOpen:g,onClose:y,activeList:t.activeList,dispatch:s}),Object(w.jsxs)(O.a,{direction:"column",children:[Object(w.jsxs)(O.a,{mt:5,ml:5,children:[i&&Object(w.jsx)(p.a,{onClick:c,isRound:!0,size:"xs",bgColor:"#424874",color:"white",_hover:{bgColor:"#292D48"},icon:Object(w.jsx)(h.a,{}),mr:5}),Object(w.jsx)(p.a,{isDisabled:"board"===L,isRound:!0,colorScheme:"blackAlpha",onClick:$,size:"xs",mr:1,icon:Object(w.jsx)(x.a,{as:f.a})}),Object(w.jsx)(p.a,{isDisabled:"table"===L,isRound:!0,colorScheme:"blackAlpha",size:"xs",onClick:$,icon:Object(w.jsx)(x.a,{as:f.b})})]}),Object(w.jsx)(O.a,{children:"board"===L?Object(w.jsx)(W,{data:l.taskLists[n],onOpen:g,dispatch:s,onDrop:A,onColumnSubmit:function(e,t){s({type:"renameColumn",payload:{columnId:e,columnName:t}})},onAddTask:function(e,t){s({type:"addTask",payload:{activeList:n,taskTitle:e,columnId:t}})},onColorChange:function(e,t){s({type:"changeTaskColor",payload:{activeList:n,taskId:e,color:t}})},onDeleteColumn:function(e){s(e)},onDeleteTask:z,onSubmitEditedTask:M,columnTitlesToIds:R}):Object(w.jsx)(te,{data:l.taskLists[n],columnTitlesToIds:R,onAddNewDetailedTask:function(e){var t=e.title,n=e.color,a=e.owner,c=e.columnId;s({type:"addDetailedTask",payload:{columnId:c,title:t,color:n,owner:a}})},onSubmitEditedTask:M,onDeleteTask:z})})]})]})})},ae=n(211),se=function(e){var t=e.hideInput,n=e.isOpen,s=e.onSubmit,c=Object(a.useState)(""),i=Object(j.a)(c,2),o=i[0],r=i[1],l=Object(a.useRef)();Object(a.useEffect)((function(){n&&l.current.focus()}),[n]);return Object(w.jsx)("form",{onSubmit:function(e){e.preventDefault(),o.trim().length>0?(s({type:"addList",payload:o}),r(""),t()):t()},children:Object(w.jsx)(O.a,{children:Object(w.jsx)(I.a,{ref:l,value:o,placeholder:"List name",onChange:function(e){r(e.target.value)},onBlur:function(){t()},colorScheme:"whiteAlpha",size:"sm",ml:5,mr:5,mt:3})})})},ce=function(e){var t=e.listName,n=e.index,s=e.activeList,c=e.onListSwitch,i=e.onListSubmit,o=e.onDelete,r=Object(a.useState)(!1),l=Object(j.a)(r,2),d=l[0],u=l[1],b=Object(a.useState)(!1),x=Object(j.a)(b,2),h=x[0],f=x[1],g=Object(a.useRef)();Object(a.useEffect)((function(){h&&g.current.focus()}),[h]);var C=function(e){"mouseover"!==e.type&&"mouseenter"!==e.type||u(!0),"mouseleave"===e.type&&u(!1)},L=function(){o({type:"deleteList",payload:t})},S=function(){f(!0)},F=Object(w.jsx)(T.c,{initialValues:{listName:t},validate:function(e){var t={};return e.listName||(t.listName="Required"),t},onSubmit:function(e){i({type:"renameList",payload:{listName:t,newName:e.listName}})},children:function(e){var t=e.handleSubmit,n=e.errors;return Object(w.jsx)(T.b,{children:Object(w.jsx)(T.a,{name:"listName",children:function(e){var a=e.field;return Object(w.jsx)(y.a,{isInvalid:n.listName,children:Object(w.jsx)(I.a,Object(v.a)(Object(v.a)({},a),{},{ref:g,name:"listName",placeholder:"List name",onBlur:t}))})}})})}});return Object(w.jsx)(k.b,{draggableId:t,index:n,children:function(e){return Object(w.jsxs)(O.a,Object(v.a)(Object(v.a)(Object(v.a)({height:"50px",width:"100%"},e.draggableProps),{},{ref:e.innerRef},e.dragHandleProps),{},{onMouseEnter:C,onMouseOver:C,onMouseLeave:C,children:[h?F:Object(w.jsxs)(O.a,Object(v.a)(Object(v.a)({width:"100%",justify:"space-between",flexGrow:1,pt:0,pl:5,pr:0,align:"center"},t===s?{as:"b",bgColor:"#292D48"}:""),{},{children:[Object(w.jsx)(R.a,Object(v.a)(Object(v.a)({cursor:"pointer",size:"md","aria-label":"Task list selector",color:"white",onClick:c},t.length>20&&{isTruncated:!0}),{},{children:t})),Object(w.jsx)(m.a,{width:75,mr:1,children:d?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(p.a,{colorScheme:"whiteAlpha",size:"xs",bg:"transparent",isRound:!0,onClick:S,icon:Object(w.jsx)(V.a,{})}),Object(w.jsx)(p.a,{colorScheme:"whiteAlpha",isRound:!0,size:"xs",bg:"transparent",onClick:L,icon:Object(w.jsx)(G.a,{})})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(p.a,{size:"xs",bg:"transparent",isRound:!0}),Object(w.jsx)(p.a,{size:"xs",bg:"transparent",isRound:!0})]})})]}),t),e.placeholder]}))}})},ie=function(e){var t=e.taskLists,n=e.activeList,s=e.onListSwitch,c=e.dispatch,i=Object(a.useState)(!1),o=Object(j.a)(i,2),r=o[0],l=o[1],d=function(){l((function(e){return!e}))},u=function(e){c(e)};return Object(w.jsx)(k.c,{droppableId:"board",type:"column",direction:"vertical",children:function(e){return Object(w.jsxs)(O.a,Object(v.a)(Object(v.a)({direction:"column",ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,t){return Object(w.jsx)(ce,{id:e,index:t,listName:e,onDelete:u,onListSubmit:u,activeList:n,onListSwitch:s},e)})),e.placeholder,r?Object(w.jsx)(se,{pt:3,pb:3,pl:5,pr:5,onSubmit:u,hideInput:d,isOpen:r}):Object(w.jsx)(R.a,{pt:3,pb:3,pl:5,pr:5,size:"md",color:"white",onClick:d,children:"+ Add List"})]}))}})},oe=function(e){var t=e.taskLists,n=e.activeList,a=e.onListSwitch,s=e.dispatch,c=e.menuIsToggled,i=e.toggleMenu;return Object(w.jsx)(k.a,{onDragEnd:function(e){e.destination&&s({type:"moveList",payload:{sourceIndex:e.source.index,destinationIndex:e.destination.index,draggableId:e.draggableId}})},children:Object(w.jsxs)(O.a,{direction:"column",bg:"#424874",minHeight:"100vh",w:{base:"100%",md:"auto",lg:"25%",xl:"20%"},children:[Object(w.jsxs)(O.a,{justify:"space-between",children:[Object(w.jsx)(D.a,{size:"md",mb:3,mt:5,ml:5,mr:5,color:"white",children:"Task Lists"}),c?Object(w.jsx)(p.a,{mt:5,mr:5,colorScheme:"whiteAlpha",onClick:i,size:"xs",isRound:!0,icon:Object(w.jsx)(ae.a,{})}):Object(w.jsx)("div",{mt:5,mr:5})]}),Object(w.jsx)(ie,{taskLists:t,activeList:n,dispatch:s,onListSwitch:a})]})})},re=n(212),le=n(150),de=n(151),ue=n(9),je=n(218),be=n(40),me=n.n(be),Oe=n(70),pe=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Oe.d)(Object(Oe.a)(ve,"userId","taskListData"),t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error updating document: ".concat(e.t0));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(e,t){var n,a=Object(v.a)({},e);switch(t.type){case"loadData":return t.payload;case"addList":var s=Object(ue.a)({},t.payload,{name:t.payload,tasks:{},columns:{},columnOrder:[]});return n=me()(e,{taskLists:{$merge:s},listOrder:{$push:[t.payload]},activeList:{$set:t.payload}}),pe(n),n;case"deleteList":var c=e.listOrder.findIndex((function(e){return e===t.payload}));if(e.activeList===t.payload){var i=e.listOrder.find((function(e){return e!==t.payload}));return n=me()(e,{activeList:{$set:i},taskLists:{$unset:[t.payload]},listOrder:{$splice:[[c,1]]}}),pe(n),n}return n=me()(e,{taskLists:{$unset:[t.payload]},listOrder:{$splice:[[c,1]]}}),pe(n),n;case"renameList":var o=function(e,t,n){var a=n[e],s=Object(le.a)(n,[e].map(de.a));return Object(v.a)(Object(ue.a)({},t,a),s)}([t.payload.listName],[t.payload.newName],e.taskLists);o[t.payload.newName].name=t.payload.newName;var r=e.listOrder.findIndex((function(e){return e===t.payload.listName}));return n=me()(e,{taskLists:{$set:o},listOrder:{$splice:[[r,1,t.payload.newName]]},activeList:{$set:t.payload.newName}}),pe(n),n;case"selectList":return n=me()(e,{activeList:{$set:t.payload.selectedList}}),pe(n),n;case"moveList":return a.listOrder.splice(t.payload.sourceIndex,1),a.listOrder.splice(t.payload.destinationIndex,0,t.payload.draggableId),pe(n=a),n;case"addColumn":var l={id:Object(je.a)(),title:t.payload.columnName,taskIds:[]};return n=me()(e,{taskLists:Object(ue.a)({},t.payload.activeList,{columns:{$merge:Object(ue.a)({},l.id,l)},columnOrder:{$push:[l.id]}})}),pe(n),n;case"moveColumn":return a.taskLists[e.activeList].columnOrder.splice(t.payload.sourceIndex,1),a.taskLists[e.activeList].columnOrder.splice(t.payload.destinationIndex,0,t.payload.draggableId),pe(n=a),n;case"renameColumn":return n=me()(e,{taskLists:Object(ue.a)({},e.activeList,{columns:Object(ue.a)({},t.payload.columnId,{title:{$set:t.payload.columnName}})})}),pe(n),n;case"deleteColumn":return n=me()(e,{taskLists:Object(ue.a)({},e.activeList,{columns:{$unset:[t.payload.columnId]},columnOrder:{$splice:[[t.payload.index,1]]}})}),pe(n),n;case"addTask":var d={id:Object(je.a)(),title:t.payload.taskTitle,color:"#EAEAEA",owner:""};return n=me()(e,{taskLists:Object(ue.a)({},e.activeList,{tasks:{$merge:Object(ue.a)({},d.id,d)},columns:Object(ue.a)({},t.payload.columnId,{taskIds:{$push:[d.id]}})})}),pe(n),n;case"addDetailedTask":var u={id:Object(je.a)(),title:t.payload.title,color:t.payload.color,owner:t.payload.owner};return n=me()(e,{taskLists:Object(ue.a)({},e.activeList,{tasks:{$merge:Object(ue.a)({},u.id,u)},columns:Object(ue.a)({},t.payload.columnId,{taskIds:{$push:[u.id]}})})}),pe(n),n;case"moveTask":var j=t.payload,b=j.sourceColumn,m=j.sourceIndex,O=j.destinationColumn,p=j.destinationIndex,x=j.draggableId;return a.taskLists[a.activeList].columns[b].taskIds.splice(m,1),a.taskLists[a.activeList].columns[O].taskIds.splice(p,0,x),pe(n=a),n;case"editTask":var h,f={id:t.payload.taskId,title:t.payload.title,color:t.payload.color,owner:t.payload.owner};return t.payload.sourceColumn!==t.payload.destinationColumn?(n=me()(e,{taskLists:Object(ue.a)({},e.activeList,{tasks:Object(ue.a)({},t.payload.taskId,{$set:f}),columns:(h={},Object(ue.a)(h,t.payload.sourceColumn,{taskIds:{$splice:[[t.payload.index,1]]}}),Object(ue.a)(h,t.payload.destinationColumn,{taskIds:{$push:[t.payload.taskId]}}),h)})}),pe(n),n):(n=me()(e,{taskLists:Object(ue.a)({},e.activeList,{tasks:Object(ue.a)({},t.payload.taskId,{$set:f})})}),pe(n),n);case"deleteTask":return n=me()(e,{taskLists:Object(ue.a)({},e.activeList,{tasks:{$unset:[t.payload.taskId]},columns:Object(ue.a)({},t.payload.columnId,{taskIds:{$splice:[[t.payload.index,1]]}})})}),pe(n),n;case"changeTaskColor":return n=me()(e,{taskLists:Object(ue.a)({},e.activeList,{tasks:Object(ue.a)({},t.payload.taskId,{color:{$set:t.payload.color}})})}),pe(n),n;default:throw new Error}},he=function(){var e=Object(a.useReducer)(xe,{listOrder:[],taskLists:{},activeList:""}),t=Object(j.a)(e,2),n=t[0],s=t[1],c=Object(a.useRef)(!0);Object(a.useEffect)((function(){c&&function(){var e=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Oe.b)(Object(Oe.a)(ve,t,"taskListData"));case 3:return n=e.sent,e.abrupt("return",n.data());case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to load user data: ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e.next=3,t("userId");case 3:n=e.sent,s({type:"loadData",payload:n});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();c.current=!1,l(!1)}),[]);var i=Object(a.useState)(!0),o=Object(j.a)(i,2),r=o[0],l=o[1],b=Object(a.useState)(!1),m=Object(j.a)(b,2),p=m[0],x=m[1],h=Object(re.a)("(max-width: 767px)"),f=Object(j.a)(h,1)[0],k=function(){x((function(e){return!e}))};return Object(w.jsx)(w.Fragment,{children:r?"Loading...":Object(w.jsxs)(O.a,{direction:{base:"column",md:"row"},children:[(!f||p)&&Object(w.jsx)(oe,{taskLists:n.listOrder,activeList:n.activeList,onListSwitch:function(e){s({type:"selectList",payload:{selectedList:e.target.innerText}})},dispatch:s,menuIsToggled:p,toggleMenu:k}),n.activeList?!p&&Object(w.jsx)(ne,{taskListData:n,activeList:n.activeList,dispatch:s,toggleMenu:k,menuIsToggled:p,isSmallerThan768:f}):"Please add a list to get started"]})})},fe=n(146),ke=Object(fe.a)({apiKey:"AIzaSyDwkoDdGaD7u9en9tnXKizNQYlTdEHLaBE",authDomain:"kanban-218d1.firebaseapp.com",databaseURL:"https://kanban-218d1-default-rtdb.europe-west1.firebasedatabase.app",projectId:"kanban-218d1",storageBucket:"kanban-218d1.appspot.com",messagingSenderId:"759366593327",appId:"1:759366593327:web:0da81e7b41d2097ca70fda",measurementId:"G-XZSFXHBR8L"}),ve=Object(Oe.c)(ke);i.a.render(Object(w.jsxs)(s.a.StrictMode,{children:[Object(w.jsx)(o.a,{initialColorMode:P.config.initialColorMode}),Object(w.jsx)(r.a,{theme:P,children:Object(w.jsx)(he,{})})]}),document.getElementById("root"))}},[[174,1,2]]]);
//# sourceMappingURL=main.45a21038.chunk.js.map